"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useLeafletData = void 0;

var _react = require("react");

var _useLeafletMap = require("./useLeafletMap");

const useLeafletData = (getLeafletData, event) => {
  const map = (0, _useLeafletMap.useLeafletMap)();
  const [data, setData] = (0, _react.useState)(() => getLeafletData(map));
  (0, _react.useEffect)(() => {
    let effectMounted = true;

    const doCallback = () => effectMounted && setData(getLeafletData(map));

    setImmediate(doCallback);
    if (map) map.on(event, doCallback);
    return () => {
      effectMounted = false;
      if (map) map.off(event, doCallback);
    };
  }, [event, getLeafletData, map]);
  return data;
};

exports.useLeafletData = useLeafletData;